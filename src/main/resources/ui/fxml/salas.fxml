<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="uy.edu.tuttifrutti.ui.salas.SalasController">

    <!-- ======================= TOP ======================= -->
    <top>
        <VBox alignment="CENTER" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="15" right="40" bottom="10" left="40"/>
            </padding>
            <children>

                <!-- Fila superior: SALIR + logo centrado -->
                <HBox spacing="20" alignment="CENTER">
                    <children>
                        <Button text="SALIR X"
                                onAction="#onSalir"
                                styleClass="pill-button-danger"/>

                        <Pane HBox.hgrow="ALWAYS"/>

                        <!-- Logo Tutti Frutti -->
                        <ImageView fitHeight="70" preserveRatio="true">
                            <image>
                                <Image url="@../images/logo-tuttifrutti.png"/>
                            </image>
                        </ImageView>

                        <Pane HBox.hgrow="ALWAYS"/>
                    </children>
                </HBox>

                <!-- TÃ­tulo SALAS -->
                <Label text="SALAS"
                       styleClass="titulo-principal"
                       BorderPane.alignment="CENTER"/>

            </children>
        </VBox>
    </top>

    <!-- ======================= CENTRO ======================= -->
    <center>
        <HBox spacing="30" alignment="CENTER">
            <padding>
                <Insets top="10" right="40" bottom="10" left="40"/>
            </padding>
            <children>

                <!-- PANEL IZQUIERDO: BUSCAR + GRID DE SALAS -->
                <VBox spacing="15" prefWidth="560" styleClass="side-panel">
                    <children>

                        <!-- Barra de bÃºsqueda -->
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <children>
                                <Label text="ðŸ”" styleClass="search-icon"/>
                                <TextField fx:id="txtBuscarSala"
                                           promptText="Buscar sala..."
                                           styleClass="search-field"
                                           HBox.hgrow="ALWAYS"/>
                            </children>
                        </HBox>

                        <Label text="SALAS DISPONIBLES" styleClass="panel-title"/>

                        <!-- Scroll para las tarjetas -->
                        <ScrollPane fitToWidth="true"
                                    hbarPolicy="NEVER"
                                    vbarPolicy="AS_NEEDED"
                                    prefViewportHeight="360"
                                    styleClass="panel-scroll">
                            <content>
                                <!-- AquÃ­ dibujamos las tarjetas de salas desde el controller -->
                                <GridPane fx:id="salasGrid"
                                          hgap="18" vgap="18">
                                    <padding>
                                        <Insets top="10" right="10" bottom="10" left="10"/>
                                    </padding>
                                    <columnConstraints>
                                        <ColumnConstraints percentWidth="25"/>
                                        <ColumnConstraints percentWidth="25"/>
                                        <ColumnConstraints percentWidth="25"/>
                                        <ColumnConstraints percentWidth="25"/>
                                    </columnConstraints>
                                </GridPane>
                            </content>
                        </ScrollPane>
                    </children>
                </VBox>

                <!-- PANEL DERECHO: DETALLE DE SALA -->
                <VBox spacing="15" prefWidth="320" styleClass="side-panel">
                    <children>
                        <Label text="DETALLE DE LA SALA" styleClass="panel-title"/>

                        <!-- Rondas / Tiempo -->
                        <GridPane hgap="10" vgap="8">
                            <children>
                                <Label text="RONDAS:"
                                       GridPane.rowIndex="0" GridPane.columnIndex="0"
                                       styleClass="hint-label"/>
                                <Label fx:id="lblRondas" text="-"
                                       GridPane.rowIndex="0" GridPane.columnIndex="1"
                                       styleClass="valor-label"/>

                                <Label text="TIEMPO:"
                                       GridPane.rowIndex="1" GridPane.columnIndex="0"
                                       styleClass="hint-label"/>
                                <Label fx:id="lblTiempo" text="-"
                                       GridPane.rowIndex="1" GridPane.columnIndex="1"
                                       styleClass="valor-label"/>
                            </children>
                        </GridPane>

                        <!-- Temas -->
                        <Label text="TEMAS" styleClass="panel-title"/>
                        <FlowPane fx:id="temasFlow"
                                  hgap="8" vgap="8"
                                  prefWrapLength="260"/>

                        <!-- Letras -->
                        <Label text="LETRAS" styleClass="panel-title"/>
                        <FlowPane fx:id="letrasFlow"
                                  hgap="8" vgap="8"
                                  prefWrapLength="260"/>
                    </children>
                </VBox>

            </children>
        </HBox>
    </center>

    <!-- ======================= BOTTOM ======================= -->
    <bottom>
        <HBox spacing="40" alignment="CENTER" BorderPane.alignment="CENTER">
            <padding>
                <Insets top="10" bottom="25" left="40" right="40"/>
            </padding>
            <children>
                <Button fx:id="btnCrearSala"
                        text="CREAR SALA"
                        onAction="#onCrearSala"
                        styleClass="tutti-button-grande"/>

                <Button fx:id="btnUnirme"
                        text="UNIRME"
                        onAction="#onUnirme"
                        disable="true"
                        styleClass="tutti-button-grande"/>
            </children>
        </HBox>
    </bottom>

</BorderPane>
